# Requirements Document - Security Service MVP

## Introduction

Security Service - базовый сервис безопасности для MVP российской игровой платформы. Обеспечивает логирование событий безопасности, базовую защиту от спама и мониторинг подозрительной активности.

## Requirements

### Requirement 1

**User Story:** Как администратор, я хочу видеть все события безопасности, чтобы отслеживать подозрительную активность

#### Acceptance Criteria

1. WHEN пользователь входит в систему THEN система SHALL логировать событие с IP и временем
2. WHEN происходит неудачная попытка входа THEN система SHALL записать это в лог
3. WHEN пользователь меняет пароль THEN система SHALL зафиксировать изменение
4. WHEN происходит подозрительная активность THEN система SHALL создать алерт

### Requirement 2

**User Story:** Как пользователь, я хочу чтобы платформа была защищена от спама и злоупотреблений

#### Acceptance Criteria

1. WHEN пользователь делает слишком много запросов THEN система SHALL временно ограничить доступ
2. WHEN обнаружены повторяющиеся неудачные попытки входа THEN система SHALL заблокировать IP на 15 минут
3. WHEN пользователь регистрируется THEN система SHALL проверить email на валидность
4. WHEN обнаружен подозрительный паттерн THEN система SHALL уведомить администраторов

### Requirement 3

**User Story:** Как система, я хочу отслеживать активность пользователей, чтобы обнаруживать аномалии

#### Acceptance Criteria

1. WHEN пользователь входит с нового IP THEN система SHALL записать это событие
2. WHEN пользователь совершает покупку THEN система SHALL проверить паттерн на подозрительность
3. WHEN обнаружена необычная активность THEN система SHALL создать предупреждение
4. WHEN активность критически подозрительна THEN система SHALL временно заморозить аккаунт

### Requirement 4

**User Story:** Как другой микросервис, я хочу проверять безопасность операций через Security Service

#### Acceptance Criteria

1. WHEN User Service проверяет безопасность входа THEN Security Service SHALL вернуть оценку риска
2. WHEN Payment Service проверяет транзакцию THEN система SHALL оценить подозрительность
3. WHEN API Gateway блокирует IP THEN Security Service SHALL записать это событие
4. WHEN запрос на проверку некорректен THEN система SHALL вернуть ошибку 400

### Requirement 5

**User Story:** Как система, я должна обеспечивать базовую защиту персональных данных

#### Acceptance Criteria

1. WHEN собираются персональные данные THEN система SHALL получать согласие пользователя
2. WHEN данные обрабатываются THEN система SHALL использовать шифрование
3. WHEN пользователь запрашивает удаление данных THEN система SHALL удалить их в течение 30 дней
4. WHEN происходит утечка данных THEN система SHALL уведомить администраторов