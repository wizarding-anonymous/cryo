# Требования к Download Service (MVP) - Месяц 2

## Введение

Download Service - критически важный микросервис для MVP российской игровой платформы. Разрабатывается в **Месяце 2** после завершения базового магазина. Обеспечивает загрузку купленных игр с проверкой прав через Library Service, управлением процессом загрузки и базовой верификацией файлов через REST API с поддержкой Docker и 100% покрытием тестами.

## Requirements

### Требование 1 (Загрузка купленных игр)

**Пользовательская история:** Как пользователь, я хочу загружать купленные игры, чтобы начать в них играть.

#### Критерии приемки

1. КОГДА пользователь выбирает игру для загрузки ТОГДА система ДОЛЖНА проверить права через Library Service
2. КОГДА права подтверждены ТОГДА система ДОЛЖНА начать загрузку файлов игры
3. КОГДА происходит загрузка ТОГДА система ДОЛЖНА показывать прогресс в процентах
4. ЕСЛИ пользователь не владеет игрой ТОГДА система ДОЛЖНА показать ошибку доступа

### Требование 2 (Управление процессом загрузки)

**Пользовательская история:** Как пользователь, я хочу управлять процессом загрузки, чтобы контролировать использование интернет-трафика.

#### Критерии приемки

1. КОГДА пользователь начинает загрузку ТОГДА система ДОЛЖНА показать статус "Загружается"
2. КОГДА пользователь приостанавливает загрузку ТОГДА система ДОЛЖНА остановить процесс
3. КОГДА пользователь возобновляет загрузку ТОГДА система ДОЛЖНА продолжить с места остановки
4. ЕСЛИ загрузка завершена ТОГДА система ДОЛЖНА показать статус "Готово к игре"

### Требование 3 (Верификация загруженных файлов)

**Пользовательская история:** Как пользователь, я хочу быть уверен что игра загрузилась корректно, чтобы избежать проблем при запуске.

#### Критерии приемки

1. КОГДА загрузка завершается ТОГДА система ДОЛЖНА проверить размер файлов
2. КОГДА файлы проверены ТОГДА система ДОЛЖНА подтвердить готовность игры
3. ЕСЛИ проверка не пройдена ТОГДА система ДОЛЖНА предложить повторную загрузку
4. ЕСЛИ файлы повреждены ТОГДА система ДОЛЖНА показать ошибку и очистить файлы

### Требование 4 (API для интеграции с другими сервисами)

**Пользовательская история:** Как другой микросервис, я хочу получать информацию о статусе загрузок через API.

#### Критерии приемки

1. КОГДА Library Service запрашивает статус ТОГДА система ДОЛЖНА вернуть информацию о загрузке
2. КОГДА frontend запрашивает прогресс ТОГДА система ДОЛЖНА вернуть процент выполнения
3. КОГДА изменяется статус загрузки ТОГДА система ДОЛЖНА обновить информацию в базе
4. ЕСЛИ загрузка не найдена ТОГДА система ДОЛЖНА вернуть ошибку 404

### Требование 5 (Управление списком загрузок)

**Пользовательская история:** Как пользователь, я хочу видеть список всех своих загрузок, чтобы отслеживать прогресс.

#### Критерии приемки

1. КОГДА пользователь открывает раздел загрузок ТОГДА система ДОЛЖНА показать все активные и завершенные загрузки
2. КОГДА загрузка активна ТОГДА система ДОЛЖНА показать текущий прогресс и скорость
3. КОГДА загрузка завершена ТОГДА система ДОЛЖНА показать дату завершения
4. ЕСЛИ загрузка приостановлена ТОГДА система ДОЛЖНА показать кнопку "Возобновить"

### Требование 6 (Архитектурные требования MVP)

**Пользовательская история:** Как DevOps инженер, я хочу развернуть сервис загрузок в Kubernetes, чтобы обеспечить высокую производительность файловых операций.

#### Критерии приемки

1. КОГДА сервис развертывается ТОГДА он ДОЛЖЕН работать в Docker контейнере
2. КОГДА команда тестирует сервис ТОГДА покрытие тестами ДОЛЖНО быть 100%
3. КОГДА происходит загрузка ТОГДА время ответа API ДОЛЖНО быть < 200ms
4. ЕСЛИ нагрузка увеличивается ТОГДА сервис ДОЛЖЕН поддерживать 1000 одновременных загрузок
#
# Ограничения MVP (Месяц 2)

### Что НЕ включено в Download Service MVP:
- ❌ P2P загрузки - **После MVP**
- ❌ Дельта-обновления игр - **После MVP**
- ❌ Приоритизация загрузок - **После MVP**
- ❌ Ограничение скорости загрузки - **После MVP**
- ❌ Автоматические обновления - **После MVP**
- ❌ Сжатие файлов на лету - **После MVP**
- ❌ CDN интеграция - **После MVP**
- ❌ Офлайн режим - **После MVP**
- ❌ Event-driven интеграции - **Только REST API для MVP**

### Технические требования MVP:
- ✅ REST API (не события)
- ✅ Docker контейнеризация
- ✅ 100% покрытие тестами
- ✅ Kubernetes готовность
- ✅ Интеграция с Library Service для проверки прав
- ✅ Базовая верификация файлов

## Критерии готовности MVP (Месяц 2)

### Функциональные критерии:
1. ✅ Пользователи могут загружать купленные игры
2. ✅ Проверка прав владения через Library Service
3. ✅ Управление процессом загрузки (пауза/возобновление)
4. ✅ Верификация целостности загруженных файлов
5. ✅ REST API для интеграции с другими сервисами
6. ✅ Список загрузок пользователя с прогрессом

### Технические критерии:
1. ✅ Docker образ собирается и запускается
2. ✅ Все тесты проходят (100% покрытие)
3. ✅ API отвечает за время < 200ms
4. ✅ Поддержка 1000 одновременных загрузок
5. ✅ Готовность к развертыванию в Kubernetes
6. ✅ Интеграция с Library Service через REST API