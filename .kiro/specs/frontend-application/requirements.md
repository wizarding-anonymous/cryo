# Требования к Frontend Application (MVP) - Месяц 1-4

## Введение

Frontend Application - веб-приложение российской игровой платформы, интегрированное с **11 микросервисами через API Gateway**. Разрабатывается **параллельно с backend** во все 4 месяца MVP. Обеспечивает современный интерфейс с плавными анимациями, реальным временем, адаптивным дизайном в стиле GitHub с поддержкой тем.

### Архитектура интеграций
Frontend Application → API Gateway → 11 микросервисов:
- User Service (аутентификация, профили)
- Game Catalog Service (каталог игр)
- Payment Service (покупки, заказы)
- Library Service (библиотека пользователя)
- Download Service (загрузки игр)
- Security Service (безопасность)
- Social Service (друзья, сообщения)
- Review Service (отзывы, рейтинги)
- Notification Service (уведомления)
- Achievement Service (достижения)
- Auth Service (дополнительная аутентификация)

## Требования

### Требование 1 (Аутентификация - интеграция через API Gateway)

**Пользовательская история:** Как пользователь, я хочу зарегистрироваться и войти в систему через API Gateway → User Service.

#### Критерии приемки

1. КОГДА пользователь заполняет форму регистрации ТОГДА система ДОЛЖНА валидировать по User Service схеме (name max 100, email format, password min 8)
2. КОГДА пользователь отправляет регистрацию ТОГДА система ДОЛЖНА отправить POST /api/auth/register через API Gateway
3. КОГДА регистрация успешна ТОГДА система ДОЛЖНА получить {statusCode: 201, data: {user, accessToken}} и автоматически войти
4. ЕСЛИ email уже существует ТОГДА система ДОЛЖНА показать ошибку CONFLICT "Пользователь с таким email уже существует"
5. КОГДА пользователь входит ТОГДА система ДОЛЖНА отправить POST /api/auth/login через API Gateway
6. КОГДА вход успешен ТОГДА система ДОЛЖНА получить {statusCode: 200, data: {user, accessToken}} и сохранить токен
7. ЕСЛИ данные неверны ТОГДА система ДОЛЖНА показать ошибку UNAUTHENTICATED "Неверный email или пароль"
8. КОГДА пользователь выходит ТОГДА система ДОЛЖНА отправить POST /api/auth/logout для добавления токена в blacklist через API Gateway

### Требование 2 (Каталог игр - интеграция с Game Catalog Service)

**Пользовательская история:** Как пользователь, я хочу просматривать каталог игр через API Gateway → Game Catalog Service.

#### Критерии приемки

1. КОГДА пользователь просматривает каталог ТОГДА система ДОЛЖНА отправить GET /api/games через API Gateway
2. КОГДА игры загружаются ТОГДА система ДОЛЖНА показать плавную анимацию и skeleton loader
3. КОГДА пользователь ищет игры ТОГДА система ДОЛЖНА отправить GET /api/games/search через API Gateway
4. КОГДА пользователь кликает на игру ТОГДА система ДОЛЖНА отправить GET /api/games/:id через API Gateway
5. КОГДА пользователь просматривает детали игры ТОГДА система ДОЛЖНА загрузить изображения через GET /api/games/:id/images
6. ЕСЛИ каталог загружается ТОГДА должен показываться анимированный skeleton loader
7. КОГДА пользователь фильтрует игры ТОГДА параметры ДОЛЖНЫ сохраняться в URL для SEO

### Требование 3 (Покупки - интеграция с Payment Service)

**Пользовательская история:** Как пользователь, я хочу покупать игры через API Gateway → Payment Service.

#### Критерии приемки

1. КОГДА пользователь нажимает "Купить" ТОГДА система ДОЛЖНА отправить POST /api/orders через API Gateway
2. КОГДА заказ создан ТОГДА система ДОЛЖНА отправить POST /api/payments для создания платежа
3. КОГДА происходит оплата ТОГДА система ДОЛЖНА отслеживать статус через GET /api/payments/:id
4. ЕСЛИ оплата успешна ТОГДА система ДОЛЖНА получить уведомление и показать анимированное подтверждение
5. КОГДА покупка завершена ТОГДА игра ДОЛЖНА автоматически появиться в библиотеке пользователя
6. ЕСЛИ оплата неуспешна ТОГДА система ДОЛЖНА показать соответствующую ошибку
7. КОГДА пользователь просматривает историю заказов ТОГДА система ДОЛЖНА отправить GET /api/orders

### Требование 4 (Адаптивный дизайн)

**Пользовательская история:** Как пользователь, я хочу пользоваться платформой на любом устройстве.

#### Критерии приемки

1. КОГДА пользователь открывает сайт на мобильном ТОГДА интерфейс ДОЛЖЕН адаптироваться
2. КОГДА пользователь меняет размер окна ТОГДА элементы ДОЛЖНЫ плавно перестраиваться
3. КОГДА пользователь использует планшет ТОГДА интерфейс ДОЛЖЕН оптимизироваться для touch
4. ЕСЛИ экран маленький ТОГДА меню ДОЛЖНО сворачиваться в burger menu

### Требование 5 (Профиль пользователя - интеграция через API Gateway)

**Пользовательская история:** Как пользователь, я хочу управлять своим профилем через API Gateway → User Service.

#### Критерии приемки

1. КОГДА пользователь открывает профиль ТОГДА система ДОЛЖНА отправить GET /api/users/profile через API Gateway с JWT токеном
2. КОГДА профиль загружен ТОГДА система ДОЛЖНА показать данные User (id, name, email, createdAt, updatedAt)
3. КОГДА пользователь обновляет имя ТОГДА система ДОЛЖНА отправить PUT /api/users/profile с UpdateProfileDto через API Gateway
4. ЕСЛИ токен недействителен ТОГДА система ДОЛЖНА получить ошибку 401 UNAUTHENTICATED и перенаправить на login
5. КОГДА пользователь удаляет аккаунт ТОГДА система ДОЛЖНА отправить DELETE /api/users/profile через API Gateway
6. ЕСЛИ удаление успешно ТОГДА система ДОЛЖНА получить 204 No Content и очистить состояние
7. КОГДА происходят ошибки ТОГДА система ДОЛЖНА обработать все коды User Service (400, 401, 404, 500)

### Требование 6 (Темы оформления)

**Пользовательская история:** Как пользователь, я хочу выбирать тему оформления по своему вкусу.

#### Критерии приемки

1. КОГДА пользователь выбирает темную тему ТОГДА интерфейс ДОЛЖЕН плавно переключиться
2. КОГДА пользователь выбирает светлую тему ТОГДА цвета ДОЛЖНЫ измениться с анимацией
3. КОГДА пользователь выбирает системную тему ТОГДА должна применяться тема ОС
4. ЕСЛИ тема меняется ТОГДА все элементы ДОЛЖНЫ обновиться синхронно

### Требование 7 (Отзывы и рейтинги - Месяц 3)

**Пользовательская история:** Как пользователь, я хочу читать и оставлять отзывы на игры.

#### Критерии приемки

1. КОГДА пользователь владеет игрой ТОГДА он ДОЛЖЕН иметь возможность оставить отзыв
2. КОГДА пользователь оставляет отзыв ТОГДА система ДОЛЖНА проверить владение игрой
3. КОГДА пользователь просматривает игру ТОГДА отзывы ДОЛЖНЫ загружаться с пагинацией
4. ЕСЛИ отзыв создан ТОГДА должно появиться уведомление об успешной публикации

### Требование 8 (Уведомления - Месяц 3)

**Пользовательская история:** Как пользователь, я хочу получать уведомления о важных событиях.

#### Критерии приемки

1. КОГДА происходит важное событие ТОГДА пользователь ДОЛЖЕН получить уведомление
2. КОГДА пользователь получает уведомление ТОГДА оно ДОЛЖНО отображаться в реальном времени
3. КОГДА пользователь кликает на уведомление ТОГДА он ДОЛЖЕН перейти к соответствующему разделу
4. ЕСЛИ пользователь настраивает уведомления ТОГДА система ДОЛЖНА учитывать его предпочтения

### Требование 9 (Библиотека игр - интеграция с Library Service)

**Пользовательская история:** Как пользователь, я хочу управлять своей библиотекой игр через API Gateway → Library Service.

#### Критерии приемки

1. КОГДА пользователь открывает библиотеку ТОГДА система ДОЛЖНА отправить GET /api/library/my через API Gateway
2. КОГДА библиотека загружена ТОГДА система ДОЛЖНА показать все купленные игры с информацией о покупке
3. КОГДА пользователь ищет в библиотеке ТОГДА система ДОЛЖНА отправить GET /api/library/my/search через API Gateway
4. КОГДА пользователь проверяет владение игрой ТОГДА система ДОЛЖНА отправить GET /api/library/ownership/:gameId
5. ЕСЛИ библиотека пуста ТОГДА система ДОЛЖНА показать приглашение к покупке игр
6. КОГДА игра добавляется в библиотеку ТОГДА она ДОЛЖНА появиться в реальном времени

### Требование 10 (Загрузки игр - интеграция с Download Service)

**Пользовательская история:** Как пользователь, я хочу загружать свои игры через API Gateway → Download Service.

#### Критерии приемки

1. КОГДА пользователь нажимает "Загрузить" ТОГДА система ДОЛЖНА отправить POST /api/downloads через API Gateway
2. КОГДА загрузка начата ТОГДА система ДОЛЖНА отслеживать прогресс через GET /api/downloads/:id
3. КОГДА пользователь приостанавливает загрузку ТОГДА система ДОЛЖНА отправить PUT /api/downloads/:id/pause
4. КОГДА пользователь возобновляет загрузку ТОГДА система ДОЛЖНА отправить PUT /api/downloads/:id/resume
5. КОГДА пользователь просматривает все загрузки ТОГДА система ДОЛЖНА отправить GET /api/downloads/user/:userId
6. ЕСЛИ загрузка завершена ТОГДА система ДОЛЖНА показать уведомление и обновить статус в библиотеке
7. КОГДА происходит ошибка загрузки ТОГДА система ДОЛЖНА показать детальную информацию об ошибке

### Требование 11 (Социальные функции - интеграция с Social Service)

**Пользовательская история:** Как пользователь, я хочу общаться с друзьями через API Gateway → Social Service.

#### Критерии приемки

1. КОГДА пользователь отправляет заявку в друзья ТОГДА система ДОЛЖНА отправить POST /api/friends/request через API Gateway
2. КОГДА пользователь просматривает список друзей ТОГДА система ДОЛЖНА отправить GET /api/friends через API Gateway
3. КОГДА пользователь отправляет сообщение ТОГДА система ДОЛЖНА отправить POST /api/messages через API Gateway
4. КОГДА пользователь просматривает диалоги ТОГДА система ДОЛЖНА отправить GET /api/messages/conversations
5. КОГДА пользователь устанавливает статус онлайн ТОГДА система ДОЛЖНА отправить PUT /api/status/online
6. ЕСЛИ приходит новое сообщение ТОГДА система ДОЛЖНА показать уведомление в реальном времени
7. КОГДА пользователь принимает/отклоняет заявку ТОГДА статус ДОЛЖЕН обновиться у обеих сторон

### Требование 12 (Отзывы и рейтинги - интеграция с Review Service)

**Пользовательская история:** Как пользователь, я хочу читать и оставлять отзывы через API Gateway → Review Service.

#### Критерии приемки

1. КОГДА пользователь создает отзыв ТОГДА система ДОЛЖНА отправить POST /api/reviews через API Gateway
2. КОГДА пользователь просматривает отзывы на игру ТОГДА система ДОЛЖНА отправить GET /api/reviews/game/:gameId
3. КОГДА пользователь просматривает рейтинг игры ТОГДА система ДОЛЖНА отправить GET /api/ratings/game/:gameId
4. ЕСЛИ пользователь не владеет игрой ТОГДА система НЕ ДОЛЖНА позволить создать отзыв
5. КОГДА отзыв создан ТОГДА он ДОЛЖЕН появиться в списке отзывов игры
6. ЕСЛИ пользователь уже оставил отзыв ТОГДА система ДОЛЖНА позволить его редактировать
7. КОГДА отзыв опубликован ТОГДА система ДОЛЖНА показать уведомление об успешной публикации

### Требование 13 (Уведомления - интеграция с Notification Service)

**Пользовательская история:** Как пользователь, я хочу получать уведомления через API Gateway → Notification Service.

#### Критерии приемки

1. КОГДА пользователь открывает уведомления ТОГДА система ДОЛЖНА отправить GET /api/notifications/user/:userId через API Gateway
2. КОГДА пользователь отмечает уведомление как прочитанное ТОГДА система ДОЛЖНА отправить PUT /api/notifications/:id/read
3. КОГДА пользователь настраивает уведомления ТОГДА система ДОЛЖНА отправить GET/PUT /api/notifications/settings/:userId
4. ЕСЛИ приходит новое уведомление ТОГДА оно ДОЛЖНО появиться в реальном времени
5. КОГДА происходит важное событие ТОГДА пользователь ДОЛЖЕН получить push-уведомление в браузере
6. ЕСЛИ пользователь отключил определенный тип уведомлений ТОГДА они НЕ ДОЛЖНЫ приходить
7. КОГДА уведомление кликается ТОГДА пользователь ДОЛЖЕН перейти к соответствующему разделу

### Требование 14 (Достижения - интеграция с Achievement Service)

**Пользовательская история:** Как пользователь, я хочу видеть свои достижения через API Gateway → Achievement Service.

#### Критерии приемки

1. КОГДА пользователь просматривает все достижения ТОГДА система ДОЛЖНА отправить GET /api/achievements через API Gateway
2. КОГДА пользователь просматривает свои достижения ТОГДА система ДОЛЖНА отправить GET /api/achievements/user/:userId
3. КОГДА пользователь просматривает прогресс ТОГДА система ДОЛЖНА отправить GET /api/achievements/progress/:userId
4. КОГДА достижение разблокировано ТОГДА система ДОЛЖНА показать анимированное уведомление
5. ЕСЛИ пользователь сравнивает с друзьями ТОГДА должна показываться сравнительная статистика
6. КОГДА пользователь выполняет действие ТОГДА прогресс достижений ДОЛЖЕН обновляться автоматически
7. ЕСЛИ достижение имеет награду ТОГДА она ДОЛЖНА быть добавлена в профиль пользователя

### Требование 15 (Безопасность - интеграция с Security Service)

**Пользовательская история:** Как администратор, я хочу мониторить безопасность через API Gateway → Security Service.

#### Критерии приемки

1. КОГДА администратор просматривает логи безопасности ТОГДА система ДОЛЖНА отправить GET /api/security/logs через API Gateway
2. КОГДА администратор просматривает алерты ТОГДА система ДОЛЖНА отправить GET /api/security/alerts
3. КОГДА администратор разрешает алерт ТОГДА система ДОЛЖНА отправить PUT /api/security/alerts/:id/resolve
4. ЕСЛИ обнаружена подозрительная активность ТОГДА система ДОЛЖНА показать уведомление администратору
5. КОГДА IP адрес заблокирован ТОГДА пользователи с этого IP НЕ ДОЛЖНЫ иметь доступ
6. ЕСЛИ происходит множественные неудачные попытки входа ТОГДА система ДОЛЖНА временно заблокировать аккаунт
7. КОГДА пользователь входит с нового устройства ТОГДА система ДОЛЖНА отправить уведомление на email

## Ограничения MVP

### Что НЕ включено в Frontend MVP:
- ❌ Мобильное приложение - **После MVP**
- ❌ Desktop приложение - **После MVP**
- ❌ PWA функции - **После MVP**
- ❌ Офлайн режим - **После MVP**

### Технические требования MVP:
- ✅ Next.js 14 с TypeScript и App Router
- ✅ Интеграция с API Gateway для всех 11 микросервисов
- ✅ Zustand для управления состоянием
- ✅ Плавные анимации и transitions
- ✅ Реальное время (WebSocket/SSE) для уведомлений и сообщений
- ✅ Адаптивный дизайн с Tailwind CSS
- ✅ Кросс-браузерная совместимость
- ✅ Стиль GitHub (чистый, минималистичный)
- ✅ Поддержка 3 тем оформления
- ✅ SSR/SSG для SEO оптимизации
- ✅ Типизированные API клиенты для всех сервисов

## Критерии готовности MVP

### Функциональные критерии:
1. ✅ Аутентификация через User Service работает (Месяц 1)
2. ✅ Каталог игр через Game Catalog Service работает (Месяц 1)
3. ✅ Покупки через Payment Service работают (Месяц 1)
4. ✅ Библиотека через Library Service работает (Месяц 2)
5. ✅ Загрузки через Download Service работают (Месяц 2)
6. ✅ Безопасность через Security Service работает (Месяц 2)
7. ✅ Социальные функции через Social Service работают (Месяц 3)
8. ✅ Отзывы через Review Service работают (Месяц 3)
9. ✅ Уведомления через Notification Service работают в реальном времени (Месяц 3)
10. ✅ Достижения через Achievement Service отслеживаются и отображаются (Месяц 3)
11. ✅ Все интеграции проходят через API Gateway
12. ✅ Все анимации и переходы работают плавно
13. ✅ Модульная архитектура обеспечивает независимость компонентов

### Технические критерии:
1. ✅ Работает на всех современных браузерах
2. ✅ Адаптивен для всех размеров экранов
3. ✅ Время загрузки страниц < 2 секунд
4. ✅ Все темы оформления работают корректно
5. ✅ Интеграция с API Gateway для маршрутизации ко всем 11 микросервисам
6. ✅ Обработка всех HTTP статусов всех сервисов (200, 201, 204, 400, 401, 409, 500)
7. ✅ JWT токен менеджмент с blacklist поддержкой через Redis
8. ✅ Типизированные API клиенты для всех микросервисов с точными TypeScript типами
9. ✅ Модульная архитектура с независимыми доменными модулями для каждого сервиса
10. ✅ Централизованное управление состоянием через Zustand с отдельными stores для каждого сервиса
11. ✅ Real-time интеграция для уведомлений, сообщений и статусов
12. ✅ Обработка ошибок интеграций с fallback механизмами
13. ✅ Кэширование запросов к микросервисам для оптимизации производительности
14. ✅ Мониторинг состояния всех микросервисов через health checks