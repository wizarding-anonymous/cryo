# Требования к Library Service (MVP) - Месяц 2

## Введение

Library Service - критически важный микросервис для MVP российской игровой платформы. Разрабатывается в **Месяце 2** после завершения базового магазина. Обеспечивает библиотеку пользователей с минимальным функционалом: просмотр купленных игр, базовая организация, интеграция с Payment Service через REST API с поддержкой Docker и 100% покрытием тестами.

## Требования

### Требование 1 (Просмотр библиотеки игр)

**Пользовательская история:** Как пользователь, я хочу видеть все свои купленные игры в библиотеке, чтобы легко находить их.

#### Критерии приемки

1. КОГДА пользователь открывает библиотеку ТОГДА система ДОЛЖНА показать все принадлежащие ему игры
2. КОГДА пользователь покупает игру через Payment Service ТОГДА система ДОЛЖНА автоматически добавить её в библиотеку
3. КОГДА пользователь просматривает игру ТОГДА система ДОЛЖНА показать название, дату покупки, базовую информацию
4. ЕСЛИ библиотека пуста ТОГДА система ДОЛЖНА показать сообщение "Библиотека пуста"

### Требование 2 (Базовый поиск в библиотеке)

**Пользовательская история:** Как пользователь, я хочу искать игры в своей библиотеке, чтобы быстро находить нужную игру.

#### Критерии приемки

1. КОГДА пользователь вводит название игры ТОГДА система ДОЛЖНА найти соответствующие игры в библиотеке
2. КОГДА пользователь ищет игру ТОГДА система ДОЛЖНА показать результаты с базовой информацией
3. КОГДА пользователь очищает поиск ТОГДА система ДОЛЖНА показать всю библиотеку
4. ЕСЛИ результатов нет ТОГДА система ДОЛЖНА показать "Игры не найдены"

### Требование 3 (История покупок)

**Пользовательская история:** Как пользователь, я хочу видеть историю своих покупок, чтобы отслеживать потраченные средства.

#### Критерии приемки

1. КОГДА пользователь просматривает историю ТОГДА система ДОЛЖНА показать все покупки с датами и ценами
2. КОГДА пользователь ищет в истории ТОГДА система ДОЛЖНА поддерживать поиск по названию игры
3. КОГДА пользователь просматривает покупку ТОГДА система ДОЛЖНА показать детали транзакции
4. ЕСЛИ истории нет ТОГДА система ДОЛЖНА показать сообщение "История покупок пуста"

### Требование 4 (API для интеграции с другими сервисами)

**Пользовательская история:** Как другой микросервис, я хочу проверять владение играми пользователями через API.

#### Критерии приемки

1. КОГДА Payment Service подтверждает покупку ТОГДА Library Service ДОЛЖЕН добавить игру в библиотеку пользователя
2. КОГДА Download Service проверяет права ТОГДА Library Service ДОЛЖЕН подтвердить владение игрой
3. КОГДА сервис запрашивает список игр пользователя ТОГДА система ДОЛЖНА вернуть базовую информацию
4. ЕСЛИ пользователь не владеет игрой ТОГДА система ДОЛЖНА вернуть ошибку 403

### Требование 5 (Архитектурные требования MVP)

**Пользовательская история:** Как DevOps инженер, я хочу развернуть библиотечный сервис в Kubernetes, чтобы обеспечить надежное хранение данных пользователей.

#### Критерии приемки

1. КОГДА сервис развертывается ТОГДА он ДОЛЖЕН работать в Docker контейнере
2. КОГДА команда тестирует сервис ТОГДА покрытие тестами ДОЛЖНО быть 100%
3. КОГДА пользователь открывает библиотеку ТОГДА время ответа ДОЛЖНО быть < 200ms
4. ЕСЛИ нагрузка увеличивается ТОГДА сервис ДОЛЖЕН поддерживать 1000 одновременных пользователей

## Ограничения MVP (Месяц 2)

### Что НЕ включено в Library Service MVP:
- ❌ Коллекции и организация игр - **После MVP**
- ❌ Фильтры и сортировка - **После MVP**
- ❌ Статистика игрового времени - **После MVP**
- ❌ Облачные сохранения - **После MVP**
- ❌ Достижения и прогресс - **Месяц 3 (Achievement Service)**
- ❌ Рекомендации игр - **После MVP**
- ❌ Управление установками - **Месяц 2 (Download Service)**
- ❌ Семейный доступ - **После MVP**
- ❌ Экспорт данных - **После MVP**
- ❌ Event-driven интеграции - **Только REST API для MVP**

### Технические требования MVP:
- ✅ REST API (не события)
- ✅ Docker контейнеризация
- ✅ 100% покрытие тестами
- ✅ Kubernetes готовность
- ✅ Простое хранение списка игр пользователя
- ✅ Интеграция с Payment Service через API

## Критерии готовности MVP (Месяц 2)

### Функциональные критерии:
1. ✅ Пользователи видят купленные игры в библиотеке
2. ✅ Автоматическое добавление игр после покупки
3. ✅ Базовый поиск игр в библиотеке
4. ✅ REST API для интеграции с другими сервисами
5. ✅ Проверка владения играми для Download Service

### Технические критерии:
1. ✅ Docker образ собирается и запускается
2. ✅ Все тесты проходят (100% покрытие)
3. ✅ API отвечает за время < 200ms
4. ✅ Поддержка 1000 одновременных пользователей
5. ✅ Готовность к развертыванию в Kubernetes