# Performance Testing Guide - Notification Service MVP

## –û–±–∑–æ—Ä

–î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Notification Service –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è MVP —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º.

## üéØ MVP –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

- **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞**: < 200ms –¥–ª—è 95% –∑–∞–ø—Ä–æ—Å–æ–≤
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å**: > 95% —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 100+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å**: > 50 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫—É–Ω–¥—É

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –ó–∞–ø—É—Å–∫ –≤ development —Ä–µ–∂–∏–º–µ
npm run start:dev

# –ò–ª–∏ –≤ production —Ä–µ–∂–∏–º–µ —Å Docker
docker-compose -f docker-compose.prod.yml up -d
```

### 2. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
# –ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç (100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, 30 —Å–µ–∫—É–Ω–¥)
node scripts/performance-test.js

# –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
TEST_URL=http://localhost:3000 \
CONCURRENT_USERS=200 \
TEST_DURATION=60 \
MAX_RESPONSE_TIME=150 \
node scripts/performance-test.js
```

## üìä –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------------|----------|
| `TEST_URL` | `http://localhost:3000` | URL —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ |
| `CONCURRENT_USERS` | `100` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| `TEST_DURATION` | `30` | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö |
| `MAX_RESPONSE_TIME` | `200` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –≤ –º—Å |

### –¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ endpoints

1. **GET /health** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
2. **GET /api/notifications/user/:userId** - –ø–æ–ª—É—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **POST /api/notifications** - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## üìà –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```
üìà Performance Test Results
==================================================
‚è±Ô∏è  Test Duration: 30.12s
üìä Total Requests: 2847
‚úÖ Successful Requests: 2832
‚ùå Failed Requests: 15
üìà Success Rate: 99.47%
üöÄ Requests/Second: 94.52

‚è±Ô∏è  Response Times:
   Average: 127.45ms
   Minimum: 23.12ms
   Maximum: 198.76ms
   95th Percentile: 165.23ms
   99th Percentile: 187.45ms

üéØ MVP Requirements Check:
   Response Time < 200ms: ‚úÖ PASS
   Success Rate > 95%: ‚úÖ PASS
   Concurrent Users (100): ‚úÖ PASS

üí° Performance Recommendations:
   ‚úÖ Performance meets MVP requirements
   üöÄ Ready for production deployment
```

### –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### –í—ã—Å–æ–∫–æ–µ –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω–¥–µ–∫—Å—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ Redis –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å email —Å–µ—Ä–≤–∏—Å–∞

#### –ù–∏–∑–∫–∞—è —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ connection pool –ë–î
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ retry –ª–æ–≥–∏–∫—É
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –≤–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

#### –ù–∏–∑–∫–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
- –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ SQL –∑–∞–ø—Ä–æ—Å—ã
- –ù–∞–π–¥–∏—Ç–µ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

## üîß –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –¢–µ—Å—Ç —Å –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π
CONCURRENT_USERS=500 TEST_DURATION=120 node scripts/performance-test.js

# –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç
CONCURRENT_USERS=1000 TEST_DURATION=300 node scripts/performance-test.js
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏

```bash
# –ë—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã (—Ç–æ–ª—å–∫–æ health check)
TEST_ENDPOINTS=health node scripts/performance-test.js

# –¢–æ–ª—å–∫–æ API –∑–∞–ø—Ä–æ—Å—ã
TEST_ENDPOINTS=api node scripts/performance-test.js
```

## üìã –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CI/CD

```yaml
# .github/workflows/performance-test.yml
name: Performance Test
on: [push, pull_request]

jobs:
  performance-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '20'
      
      - name: Install dependencies
        run: npm ci
        working-directory: backend/notification-service
      
      - name: Start services
        run: docker-compose -f docker-compose.test.yml up -d
        working-directory: backend/notification-service
      
      - name: Wait for services
        run: sleep 30
      
      - name: Run performance tests
        run: |
          TEST_URL=http://localhost:3000 \
          CONCURRENT_USERS=50 \
          TEST_DURATION=30 \
          node scripts/performance-test.js
        working-directory: backend/notification-service
      
      - name: Stop services
        run: docker-compose -f docker-compose.test.yml down
        working-directory: backend/notification-service
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ production

```bash
# –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
# –î–æ–±–∞–≤—å—Ç–µ –≤ cron –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Kubernetes CronJob

# –ö–∞–∂–¥—ã–π —á–∞—Å
0 * * * * cd /app && node scripts/performance-test.js >> /var/log/performance.log 2>&1
```

## üéØ –ë–µ–Ω—á–º–∞—Ä–∫–∏ MVP

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞**: 95% –∑–∞–ø—Ä–æ—Å–æ–≤ < 200ms
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å**: > 95%
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: 100 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö
- **RPS**: > 50 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫—É–Ω–¥—É

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞**: 95% –∑–∞–ø—Ä–æ—Å–æ–≤ < 150ms
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å**: > 99%
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: 200+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö
- **RPS**: > 100 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫—É–Ω–¥—É

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

1. **Response Time** - –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ API
2. **Throughput** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É
3. **Error Rate** - –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
4. **CPU Usage** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
5. **Memory Usage** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
6. **Database Performance** - –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ë–î
7. **Cache Hit Rate** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

- **Prometheus + Grafana** - –º–µ—Ç—Ä–∏–∫–∏ –∏ –¥–∞—à–±–æ—Ä–¥—ã
- **New Relic / DataDog** - APM –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **Kubernetes Metrics** - —Ä–µ—Å—É—Ä—Å—ã –∫–ª–∞—Å—Ç–µ—Ä–∞
- **Custom Health Checks** - –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

## üö® –ê–ª–µ—Ä—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –¥–ª—è:
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ > 300ms
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å < 95%
- CPU > 80%
- Memory > 85%
- –û—à–∏–±–∫–∏ –ë–î
- –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Production Deployment Guide](./PRODUCTION_DEPLOYMENT.md)
- [Monitoring Setup](./k8s/monitoring.yaml)
- [API Documentation](./API_DOCUMENTATION.md)
- [Troubleshooting Guide](./PRODUCTION_DEPLOYMENT.md#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)